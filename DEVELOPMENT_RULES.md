# 開発ルール

## t-wada推奨のテスト駆動開発 (TDD)

### 基本原則
1. **Red-Green-Refactor サイクル**
   - Red: 失敗するテストを書く
   - Green: テストを通す最小限のコードを書く
   - Refactor: コードを改善する

2. **テストファースト**
   - 実装前に必ずテストを書く
   - テストが仕様書の役割を果たす
   - テストが無いコードは書かない

### コーディング規約

#### ファイル構造
```
src/
├── services/          # ビジネスロジック
├── parsers/           # データ変換
├── __tests__/         # テスト（各ディレクトリ内）
└── index.ts           # エントリーポイント
```

#### テスト命名規則
- `describe`: クラス名やモジュール名
- `it`: 具体的な動作を説明
- テストは日本語で書く（仕様が明確になる）

#### 実装原則
1. **単一責任の原則**: 1つのクラスは1つの責任
2. **依存性注入**: 外部依存はコンストラクタで注入
3. **モック化**: 外部サービスは必ずモック化
4. **エラーハンドリング**: 全ての異常系をテスト

### 品質保証
- **テストカバレッジ**: 100%を目指す
- **リント**: ESLintで静的解析
- **型安全**: TypeScriptで型チェック
- **継続的テスト**: npm test で全テスト実行

### Git運用
- 各機能はブランチで開発
- テストが通ってからコミット
- **コミットメッセージ**: [Conventional Commits](https://www.conventionalcommits.org/) と [Gitmoji](https://gitmoji.dev/) に準拠する。
  - コミットメッセージは `type: emoji 本文` の形式で記述する。

| Type | Emoji | Description |
| :--- | :--- | :--- |
| `feat` | ✨ | 新機能の追加 |
| `fix` | 🐛 | バグ修正 |
| `docs` | 📝 | ドキュメントの変更 |
| `style` | 💄 | コードスタイル（フォーマットなど）の変更 |
| `refactor` | ♻️ | リファクタリング |
| `perf` | ⚡️ | パフォーマンス改善 |
| `test` | ✅ | テストの追加・修正 |
| `build` | 📦 | ビルドシステムや外部依存関係の変更 |
| `ci` | 👷 | CI/CD関連の変更 |
| `chore` | 🔧 | その他の雑多な変更 |
| `revert` | ⏪ | コミットの取り消し |

### 参考文献
- t-wada氏のTDD講演資料
- Clean Code 原則
- Jest公式ドキュメント